{{ header }}
<style>
#simple-checkout-lite .form-group label,
#simple-checkout-lite .control-label {
  text-align: left;
  float: none;
  width: 100%;
  padding-top: 0;
}
</style>
<div id="checkout-checkout" class="container">
  <ul class="breadcrumb">
    {% for breadcrumb in breadcrumbs %}
    <li><a href="{{ breadcrumb.href }}">{{ breadcrumb.text }}</a></li>
    {% endfor %}
  </ul>
  <div class="row">
    <div id="content" class="col-sm-12">{{ content_top }}
      <h1>{{ heading_title }}</h1>

      <div id="simple-checkout-lite">
        <form id="simple-checkout-form" class="form-horizontal">
          <div class="panel-group" id="accordion">

            {# Customer Information #}
            <div class="panel panel-default">
              <div class="panel-heading">
                <h4 class="panel-title">
                  <a data-toggle="collapse" data-parent="#accordion" href="#collapse-customer">
                    <i class="fa fa-user"></i> {{ text_customer_info }}
                  </a>
                </h4>
              </div>
              <div id="collapse-customer" class="panel-collapse collapse in">
                <div class="panel-body">
                  <div class="row">
                    {# First Name #}
                    {% if fields.firstname != 'hidden' %}
                    <div class="col-sm-6">
                      <div class="form-group{% if fields.firstname == 'required' %} required{% endif %}">
                        <label class="control-label" for="input-firstname">{{ entry_firstname }}</label>
                        <input type="text" name="firstname" value="{{ customer_firstname }}" placeholder="{{ entry_firstname }}" id="input-firstname" class="form-control" />
                      </div>
                    </div>
                    {% endif %}

                    {# Last Name #}
                    {% if fields.lastname != 'hidden' %}
                    <div class="col-sm-6">
                      <div class="form-group{% if fields.lastname == 'required' %} required{% endif %}">
                        <label class="control-label" for="input-lastname">{{ entry_lastname }}</label>
                        <input type="text" name="lastname" value="{{ customer_lastname }}" placeholder="{{ entry_lastname }}" id="input-lastname" class="form-control" />
                      </div>
                    </div>
                    {% endif %}

                    {# Email #}
                    {% if fields.email != 'hidden' %}
                    <div class="col-sm-6">
                      <div class="form-group{% if fields.email == 'required' %} required{% endif %}">
                        <label class="control-label" for="input-email">{{ entry_email }}</label>
                        <input type="email" name="email" value="{{ customer_email }}" placeholder="{{ entry_email }}" id="input-email" class="form-control" />
                      </div>
                    </div>
                    {% endif %}

                    {# Telephone #}
                    {% if fields.telephone != 'hidden' %}
                    <div class="col-sm-6">
                      <div class="form-group{% if fields.telephone == 'required' %} required{% endif %}">
                        <label class="control-label" for="input-telephone">{{ entry_telephone }}</label>
                        <input type="tel" name="telephone" value="{{ customer_telephone }}" placeholder="{{ entry_telephone }}" id="input-telephone" class="form-control" />
                      </div>
                    </div>
                    {% endif %}

                    {# Company #}
                    {% if fields.company != 'hidden' %}
                    <div class="col-sm-6">
                      <div class="form-group{% if fields.company == 'required' %} required{% endif %}">
                        <label class="control-label" for="input-company">{{ entry_company }}</label>
                        <input type="text" name="company" value="{{ customer_company }}" placeholder="{{ entry_company }}" id="input-company" class="form-control" />
                      </div>
                    </div>
                    {% endif %}
                  </div>
                </div>
              </div>
            </div>

            {# Address Section #}
            {% if shipping_required or fields.address_1 != 'hidden' or fields.city != 'hidden' or fields.country != 'hidden' or fields.zone != 'hidden' %}
            <div class="panel panel-default">
              <div class="panel-heading">
                <h4 class="panel-title">
                  <a data-toggle="collapse" data-parent="#accordion" href="#collapse-address">
                    <i class="fa fa-map-marker"></i> {{ text_shipping_address }}
                  </a>
                </h4>
              </div>
              <div id="collapse-address" class="panel-collapse collapse in">
                <div class="panel-body">
                  <div class="row">
                    {# Address 1 #}
                    {% if fields.address_1 != 'hidden' %}
                    <div class="col-sm-12">
                      <div class="form-group{% if fields.address_1 == 'required' %} required{% endif %}">
                        <label class="control-label" for="input-address-1">{{ entry_address_1 }}</label>
                        <input type="text" name="address_1" value="{{ customer_address_1 }}" placeholder="{{ entry_address_1 }}" id="input-address-1" class="form-control" />
                      </div>
                    </div>
                    {% endif %}

                    {# Address 2 #}
                    {% if fields.address_2 != 'hidden' %}
                    <div class="col-sm-12">
                      <div class="form-group{% if fields.address_2 == 'required' %} required{% endif %}">
                        <label class="control-label" for="input-address-2">{{ entry_address_2 }}</label>
                        <input type="text" name="address_2" value="{{ customer_address_2 }}" placeholder="{{ entry_address_2 }}" id="input-address-2" class="form-control" />
                      </div>
                    </div>
                    {% endif %}

                    {# City #}
                    {% if fields.city != 'hidden' %}
                    <div class="col-sm-6">
                      <div class="form-group{% if fields.city == 'required' %} required{% endif %}">
                        <label class="control-label" for="input-city">{{ entry_city }}</label>
                        <input type="text" name="city" value="{{ customer_city }}" placeholder="{{ entry_city }}" id="input-city" class="form-control" />
                      </div>
                    </div>
                    {% endif %}

                    {# Postcode #}
                    {% if fields.postcode != 'hidden' %}
                    <div class="col-sm-6">
                      <div class="form-group{% if fields.postcode == 'required' %} required{% endif %}">
                        <label class="control-label" for="input-postcode">{{ entry_postcode }}</label>
                        <input type="text" name="postcode" value="{{ customer_postcode }}" placeholder="{{ entry_postcode }}" id="input-postcode" class="form-control" />
                      </div>
                    </div>
                    {% endif %}

                    {# Country #}
                    {% if fields.country != 'hidden' %}
                    <div class="col-sm-6">
                      <div class="form-group{% if fields.country == 'required' %} required{% endif %}">
                        <label class="control-label" for="input-country">{{ entry_country }}</label>
                        <select name="country_id" id="input-country" class="form-control">
                          <option value="">{{ entry_country }}</option>
                          {% for country in countries %}
                          {% if country.country_id == customer_country_id %}
                          <option value="{{ country.country_id }}" selected="selected">{{ country.name }}</option>
                          {% else %}
                          <option value="{{ country.country_id }}">{{ country.name }}</option>
                          {% endif %}
                          {% endfor %}
                        </select>
                      </div>
                    </div>
                    {% else %}
                    <input type="hidden" name="country_id" id="input-country" value="{{ customer_country_id }}" />
                    {% endif %}

                    {# Zone #}
                    {% if fields.zone != 'hidden' %}
                    <div class="col-sm-6">
                      <div class="form-group{% if fields.zone == 'required' %} required{% endif %}">
                        <label class="control-label" for="input-zone">{{ entry_zone }}</label>
                        <select name="zone_id" id="input-zone" class="form-control" data-zone-id="{{ customer_zone_id }}">
                        </select>
                      </div>
                    </div>
                    {% else %}
                    <input type="hidden" name="zone_id" id="input-zone" value="{{ customer_zone_id }}" data-zone-id="{{ customer_zone_id }}" />
                    {% endif %}
                  </div>

                  {# Same address checkbox #}
                  {% if show_shipping_address %}
                  <div class="form-group">
                    <div class="checkbox">
                      <label>
                        <input type="checkbox" name="shipping_address" value="1" checked="checked" />
                        {{ entry_same_address }}
                      </label>
                    </div>
                  </div>
                  {% else %}
                  <input type="hidden" name="shipping_address" value="1" />
                  {% endif %}
                </div>
              </div>
            </div>
            {% else %}
            {# Address section hidden - still need country/zone for shipping calculations #}
            <input type="hidden" name="country_id" id="input-country" value="{{ customer_country_id }}" />
            <input type="hidden" name="zone_id" id="input-zone" value="{{ customer_zone_id }}" data-zone-id="{{ customer_zone_id }}" />
            <input type="hidden" name="shipping_address" value="1" />
            {% endif %}

            {# Shipping Method #}
            {% if shipping_required and show_shipping_method %}
            <div class="panel panel-default">
              <div class="panel-heading">
                <h4 class="panel-title">
                  <a data-toggle="collapse" data-parent="#accordion" href="#collapse-shipping">
                    <i class="fa fa-truck"></i> {{ text_shipping_method }}
                  </a>
                </h4>
              </div>
              <div id="collapse-shipping" class="panel-collapse collapse in">
                <div class="panel-body">
                  <div id="shipping-methods">
                    <p><i class="fa fa-spinner fa-spin"></i> {{ text_loading }}</p>
                  </div>
                </div>
              </div>
            </div>
            {% endif %}

            {# Payment Method #}
            {% if show_payment_method %}
            <div class="panel panel-default">
              <div class="panel-heading">
                <h4 class="panel-title">
                  <a data-toggle="collapse" data-parent="#accordion" href="#collapse-payment">
                    <i class="fa fa-credit-card"></i> {{ text_payment_method }}
                  </a>
                </h4>
              </div>
              <div id="collapse-payment" class="panel-collapse collapse in">
                <div class="panel-body">
                  <div id="payment-methods">
                    <p><i class="fa fa-spinner fa-spin"></i> {{ text_loading }}</p>
                  </div>
                </div>
              </div>
            </div>
            {% endif %}

            {# Order Comment #}
            {% if show_comment %}
            <div class="panel panel-default">
              <div class="panel-heading">
                <h4 class="panel-title">
                  <a data-toggle="collapse" data-parent="#accordion" href="#collapse-comment">
                    <i class="fa fa-comment"></i> {{ text_comments }}
                  </a>
                </h4>
              </div>
              <div id="collapse-comment" class="panel-collapse collapse in">
                <div class="panel-body">
                  <textarea name="comment" rows="4" class="form-control" placeholder="{{ entry_comment }}"></textarea>
                </div>
              </div>
            </div>
            {% endif %}

          </div>

          {# Totals #}
          <div class="panel panel-default">
            <div class="panel-heading">
              <h4 class="panel-title">
                <i class="fa fa-shopping-cart"></i> {{ text_order_summary }}
              </h4>
            </div>
            <div class="panel-body">
              {# Products List #}
              <div class="checkout-products-list">
                {% for product in products %}
                <div class="media" style="margin-bottom: 10px; padding-bottom: 10px; border-bottom: 1px solid #eee;">
                  <div class="media-left">
                    <a href="{{ product.href }}"><img src="{{ product.image }}" alt="{{ product.name }}" style="width: 50px; height: 50px; object-fit: cover;" /></a>
                  </div>
                  <div class="media-body">
                    <p style="margin: 0; font-weight: 500;"><a href="{{ product.href }}">{{ product.name }}</a></p>
                    {% if product.option %}
                    {% for option in product.option %}
                    <small class="text-muted">{{ option.name }}: {{ option.value }}</small><br/>
                    {% endfor %}
                    {% endif %}
                    <small>{{ product.quantity }} x {{ product.price }} = <strong>{{ product.total }}</strong></small>
                  </div>
                </div>
                {% endfor %}
              </div>
              <table class="table table-bordered" id="totals-table">
                <tbody>
                  <tr>
                    <td colspan="2"><i class="fa fa-spinner fa-spin"></i> {{ text_loading }}</td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>

          {# Agreement #}
          {% if agree %}
          <div class="panel panel-default">
            <div class="panel-body">
              <div class="checkbox">
                <label>
                  <input type="checkbox" name="agree" value="1" />
                  {{ text_agree }}
                </label>
              </div>
            </div>
          </div>
          {% endif %}

          {# Buttons #}
          <div class="buttons">
            <div class="pull-right">
              <button type="button" id="button-confirm" class="btn btn-primary btn-lg" disabled="disabled">
                <i class="fa fa-check"></i> {{ button_confirm }}
              </button>
            </div>
          </div>
        </form>
      </div>

      {{ content_bottom }}</div>
  </div>
</div>

<script type="text/javascript">
var SimpleCheckoutLite = {
    urls: {
        save: '{{ action_save }}',
        shipping: '{{ action_shipping }}',
        payment: '{{ action_payment }}',
        totals: '{{ action_totals }}',
        confirm: '{{ action_confirm }}',
        setShipping: '{{ action_set_shipping }}',
        setPayment: '{{ action_set_payment }}',
        zone: '{{ action_zone }}'
    },
    shipping_required: {{ shipping_required ? 'true' : 'false' }},
    show_shipping_method: {{ show_shipping_method ? 'true' : 'false' }},
    show_payment_method: {{ show_payment_method ? 'true' : 'false' }},
    require_agree: {{ agree ? 'true' : 'false' }},
    fields: {
        firstname: '{{ fields.firstname }}',
        lastname: '{{ fields.lastname }}',
        email: '{{ fields.email }}',
        telephone: '{{ fields.telephone }}',
        company: '{{ fields.company }}',
        address_1: '{{ fields.address_1 }}',
        address_2: '{{ fields.address_2 }}',
        city: '{{ fields.city }}',
        postcode: '{{ fields.postcode }}',
        country: '{{ fields.country }}',
        zone: '{{ fields.zone }}'
    },
    text: {
        loading: '{{ text_loading }}',
        select_option: '{{ text_select_option }}',
        processing: '{{ text_processing }}',
        button_confirm: '{{ button_confirm }}',
        no_shipping: '{{ text_no_shipping }}',
        no_payment: '{{ text_no_payment }}',
        error_loading: '{{ text_error_loading }}',
        error_try_again: '{{ text_error_try_again }}'
    }
};
</script>
<script type="text/javascript" src="catalog/view/javascript/simple_checkout_lite.js"></script>
{{ footer }}
